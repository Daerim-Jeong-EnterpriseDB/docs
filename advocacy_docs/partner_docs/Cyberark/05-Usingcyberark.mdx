---
title: 'Using'
description: 'Walkthrough of example usage scenarios'
---

After you have configured your EDB Postgres distribution and CyberArk, as stated in the Configuring section, you will be able to then use the CyberArk (CPM Central Policy Manager) functionality. 

Authorized users can change passwords that are stored in the Safe through the PVWA (Password Vault Web Access). These passwords can be changed manually or replaced by a new password that is randomly generated by the Central Policy Manager. The CPM generates unique and highly secure passwords using the password policy and the random password generation mechanism. 

The following steps will walk though an example to demonstrate the configuration and enforcement of a password policy in CPM by setting the Password Management parameters for an EDB Postgres distribution.

- Configure Password Policy for PostgreSQL Platform
  - Configure password policy by setting the Password Management parameters for PostgreSQL platform
- Create the Account for EDB Postgres Advanced Server running instance
  - Set up Account on PVWA (Password Vault Web Access) for the EDB Postgres Advanced Server running instance, the password will be managed for this EDB Postgres Advanced Server running instance
- Change the Password 
  - Using CPM change the password for the EDB Postgres Advanced Server running instance
- Verify that the User can login to EDB Postgres Advanced Server
  - After the password is changed by CPM, login to EDB Postgres Advanced Server with the changed password

!!! Note
  In the example we will be using PSQL to login to the EDB Postgres distribution to validate the password change.

## Configure Password Policy for PostgreSQL Platform

1. Login to PVWA (Password Vault Web Access).

2. Click Administration option, and then select Platform Management. A list of supported target account platforms appears.

3. Select Databases —> PostgreSQL, and then click Edit. The platform parameters appear.

![Select Platform](Images/platfom.png)

4. In the Automatic Password Management —> General parameters Section, make the following change.
       
       - Set the ImmediateInterval parameter to 1.  (This parameter is the number of minutes that will elapse between when the user initiates an account management process and when the process is performed.  Using 1 will allow us to quickly test the example.)
      
![Select Platform](Images/passwordpolicy.png)

5. Click Apply to save the changes, and then click OK.

6. Restart the CPM (Central Policy Manager) Service named "CyberArk Password Manager".

## Create the Account for EDB Postgres distribution 

1. Login to PVWA (Password Vault Web Access).

2. Open Accounts page, click Add Account.

3. On select system type screen, select database.

![Select Platform](Images/database.png)

4. On asssign to platform screen, select PostgreSQL.

![Select Platform](Images/pg.png)

5. On store in safe screen, select the safe to store the password.

![Select Platform](Images/safe.png)

6. On define properties screen, provide the connection information for the EDB Postgres Advanced Server running instance.

![Select Platform](Images/conn1.png)

![Select Platform](Images/conn2.png)

7. Click on Add button, the account will be created.

![Select Platform](Images/account.png)

## Login to EDB Postgres Advanced Server with PSQL Client 

1. Open PSQL and login to your EDB Postgres distribution instance with the account and password just created, the login should be successful.

![Change Password](Images/login1.png)

## Change the Password 

1. Login to PVWA (Password Vault Web Access).

2. Select the account created in the above steps.

3. Open Account Details screen, and then click Change.

![Change Password](Images/password1.png)

4. On the Change Password screen, specify how the CPM will change the password, and then click Change. The CPM (Central Policy Manager) changes the password after the one minute interval that you specified in the `ImmediateInterval` parameter.

![Change Password](Images/password2.png)

### Verify that the password is changed successfully

1. After one minute, in the Account Details Screen, click Show to display the new password.

![Change Password](Images/showpass1.png)

![Change Password](Images/showpass2.png)

2. On the Activities screen, Click the CPM Change Password action to display details about the password change process.

## Login to EDB Postgres distribution with PSQL Client using the new password

1. Open PSQL client and login to EDB Postgres Advanced Server with the changed password. Login will be successful.

![Change Password](Images/login1.png)

2. Try to login with another password, the login will fail and an error message will be displayed.

![Change Password](Images/login2.png)
