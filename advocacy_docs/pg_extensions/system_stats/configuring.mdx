---
title: Configuring system_stats
navTitle: Configuring
---

1. Add `system_stats` to the `shared_preload_libraries` parameter: 

   ```ini
   shared_preload_libraries = 'system_stats'
   ```

   !!! Note
   If `shared_preload_libraries` has other extensions, then you can add `system_stats` to the list. The order doesn't matter. 
   !!!

1. Add these changes to `postgresql.conf`:

  ```shell
  wal_level = logical
  max_replication_slots = 1 # ... or add 1 to the current value.
  ```

1. Restart Postgres.

1. Create the `system_stats` extension in your database:

  ```shell
  CREATE EXTENSION system_stats;
  ```
!!! Note 
    When upgrading a database cluster with `system_stats` installed (either using `pg_dumpall`/`pg_restore` or `pg_upgrade`), make sure that the new cluster has `system_stats` in `shared_preload_libraries` before you upgrade. Otherwise the upgrade fails.

