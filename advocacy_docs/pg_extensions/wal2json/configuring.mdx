---
title: Configuring wal2json
navTitle: Configuring
---

1. Add `wal2json` to the `shared_preload_libraries` parameter: 

   ```ini
   shared_preload_libraries = 'wal2json'
   ```

   !!! Note
   If `shared_preload_libraries` has other extensions, then you can add `wal2json` to the list. The order doesn't matter. 
   !!!

1. Add these changes to `postgresql.conf`:

  ```shell
  wal_level = logical
  max_replication_slots = 1 # ... or add 1 to the current value.
  ```

1. Restart Postgres.

1. Create the `wal2json` extension in your database:

  ```shell
  CREATE EXTENSION wal2json;
  ```

!!! Note 
    When upgrading a database cluster with `wal2json` installed (either using `pg_dumpall`/`pg_restore` or `pg_upgrade`), make sure that the new cluster has `wal2json` in `shared_preload_libraries` before you upgrade. Otherwise the upgrade fails.

