---
title: Configuring wal2json
navTitle: Configuring
---
1. Add these changes to `postgresql.conf`:

  ```shell
wal_level = logical
    #
    # these parameters only need to set in versions 9.4, 9.5 and 9.6
    # default values are ok in version 10 or later
    #
max_replication_slots = 10
max_wal_senders = 10
  ```

!!! Note 
    When upgrading a database cluster with `wal2json` installed (either using `pg_dumpall`/`pg_restore` or `pg_upgrade`), make sure that the new cluster has `wal2json` in `shared_preload_libraries` before you upgrade. Otherwise the upgrade fails.

