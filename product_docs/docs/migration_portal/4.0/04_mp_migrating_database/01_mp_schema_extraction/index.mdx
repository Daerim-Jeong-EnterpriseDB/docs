---
title: "Extracting a schema"

legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-migration-portal/user-guides/user-guide/3.0.1/mp_schema_extraction.html"


---

<div id="mp_schema_extraction" class="registered_link"></div>

You can perform a schema extraction using either of the following methods. EDB recommends using the EDB DDL extractor to extract your schemas.
 -  [EDB DDL extractor](#extracting-schemas-using-the-edb-ddl-extractor) (recommended method)
 -  [Oracle’s Data Pump utility](01_data_pump_utility/) 

## Extracting schemas using the EDB DDL Extractor

Download the latest EDB DDL Extractor script from the Migration Portal Projects page.

!!! Note
    Migration Portal might become unresponsive for very large SQL files, depending on your system and browser resource availability. To resolve this, try extracting fewer schemas at a time to reduce the SQL file size.

### Prerequisites

You can run the EDB DDL Extractor script in SQL Developer or SQL\*Plus. It uses Oracle’s `DBMS_METADATA` built-in package to extract DDLs for different objects under schemas (specified while running the script). The EDB DDL extractor creates the DDL file uploaded to the portal and analyzed for EDB Postgres Advanced Server compatibility.

!!! Note
    You must have `CONNECT` and `SELECT_CATALOG_ROLE` roles and `CREATE TABLE` privilege.

#### For SQL\*Plus

1.  Connect to SQL\*Plus and run this command:

    `SQL>@edb_ddl_extractor.sql`

2.  When prompted, if the Oracle user that is running the script has the required privileges, press **Enter** to continue running the script. 

3.  When prompted, provide the schema name. When extracting multiple schemas, use a comma (`‘,’`) as a delimiter.

 !!! Note
     If you want to extract all the user schemas from the current database, don't mention any schema names while extracting. However, we recommend mentioning the schema names that you want to extract.

4.  When prompted, enter the path or directory for the extractor to store the extracted DDL. If you don't specify a path, the extracted DDL is output to the directory where you ran the SQL\*Plus command.
  
5.  When prompted, enter `yes`or `no` depending on whether you want to extract dependent objects from other schemas.

For example, on Linux:

```text
Enter a comma separated list of schemas to be extracted (Default all schemas): HR, SCOTT, FINANCE

Location for output file (Default current location) : /home/oracle/extracted_ddls/

WARNING:

Given schema(s) list may contain objects which are dependent on objects from other schema(s), not mentioned in the list.` `Assessment may fail for such objects. It is suggested to extract all dependent objects together.

Extract dependent object from other schemas?(yes/no) (Default no / Ignored for all schemas option): yes
```
On Windows:

```text
Enter comma separated list of schemas to be extracted (Default all schemas): HR, SCOTT, FINANCE

Location for output file (Default current location) : c:\Users\Example\Desktop\

WARNING:

Given schema(s) list may contain objects which are dependent on objects from other schema(s), not mentioned in the list.` `Assessment may fail for such objects. It is suggested to extract all dependent objects together.

Extract dependent object from other schemas?(yes/no) (Default no / Ignored for all schemas option): yes
```

#### For SQL Developer

After loading the `edb_ddl_extractor.sql` script into SQL Developer and connecting to the source Oracle database, run the script. As the script executes, respond to the prompts.

1.  If the the user for the database connection has the required privileges as listed in the **Script Output** tab, select **Yes** to continue running the script.

2.  Enter a comma-separated list of schemas and select **OK**.

3.  Enter the path for the output file and select **OK**. The default is the location of the DDL Extractor script.

4.  Enter `yes` or `no` to extract dependent objects and select **OK**. The default is to not extract dependent objects. 

Output of the DDL Extractor run appears in the Script Output tab. The name of the output file appears after the `Extraction Completed` message in the script output.

!!! Note
    You can also enter single schema name in both SQL\*Plus and SQL Developer.

The script then iterates through the object types in the source database. Once the task is completed, the `.SQL` output is stored at the location you entered (e.g., `c:\Users\Example\Desktop\`).

See an important [note](#about-file-encoding) about the file encoding format expected by Migration Portal.

### Additional notes

-   The EDB DDL Extractor script doesn't extract objects restored using `Flashback` that still have names like `BIN$b54+4XlEYwPgUAB/AQBWwA==$0`. If you want to extract these objects, you must change the names of the objects and rerun the extraction process.
-   The EDB DDL Extractor extracts `nologging` tables as normal tables. Once these tables are migrated to EDB Postgres Advanced Server, WAL log files are created.
-   The EDB DDL Extractor extracts objects only with VALID status. For any objects that have INVALID status that you want Migration Portal to assess, first update them to VALID.
-   The EDB DDL Extractor doesn't extract objects that were obfuscated using the Oracle wrap feature. As such, these objects aren't included in the set of DDL assessed by the Migration Portal. If you want to assess these objects and migrate them to EDB Postgres Advanced Server, replace the wrapped versions of the objects with nonwrapped versions. See [Wrapped objects](#wrapped-objects) for more information.
-   The EDB DDL Extractor creates Global Temporary tables to store the schema names and their dependency information. These tables are dropped at the end of successful extraction.
-   The EDB DDL Extractor script doesn't extract schemas whose name starts with `PG_` because PostgreSQL doesn't support it. If you want to extract these schemas, you must change the name of the schema before extraction.

## Schemas and objects support

The lists and tables that follow show supported and unsupported schemas and objects.

### Unsupported schemas

Exclude these Oracle systems schemas while generating the SQL dump file.

|                       |                     |                   |                    |                         |
| :-------------------- | :------------------ | :---------------- | :----------------- | :---------------------- |
| ANONYMOUS	| APEX_PUBLIC_USER	| APEX_030200	| APEX_040000	| APEX_040200	 |
| APPQOSSYS	| AUDSYS	| CTXSYS	| DMSYS	| DBSNMP	 |
| DBSFWUSER	| DEMO	| DIP	| DMSYS	| DVF	 |
| DVSYS	| EXFSYS	| FLOWS_FILES	| FLOWS_020100	| FRANCK	 |
| GGSYS	| GSMADMIN_INTERNAL	| GSMCATUSER	| GSMROOTUSER	| GSMUSER	 |
| LBACSYS	| MDDATA	| MDSYS	| MGMT_VIEW	| OJVMSYS	 |
| OLAPSYS	| ORDPLUGINS	| ORDSYS	| ORDDATA	| OUTLN	 |
| ORACLE_OCM	| OWBSYS	| OWBYSS_AUDIT	| PDBADMIN	| RMAN	 |
| REMOTE_SCHEDULER_AGENT	| SI_INFORMTN_SCHEMA	| SPATIAL_CSW_ADMIN_USR	| SPATIAL_WFS_ADMIN_USR	| SQLTXADMIN	 |
| SQLTXPLAIN	| SYS$UMF	| SYS	| SYSBACKUP	| SYSDG	 |
| SYSKM	| SYSRAC	| SYSTEM	| SYSMAN	| TSMSYS	 |
| WKPROXY	| WKSYS	| WK_TEST	| WMSYS	| XDB	 |
| XS$NULL	| 				 |	

!!! Note
    EDB Postgres Advanced Server doesn't support schema names starting with `pg_`.

### Supported object types

-   Synonyms
-   DB links
-   Types and type body
-   Sequences
-   Tables
-   Constraints
-   Indexes (Except LOB indexes and indexes on materialized views)
-   Views
-   Materialized views
-   Triggers
-   Functions
-   Procedures
-   Packages

!!! Note
    COMMENTS on columns, tables, and materialized views are also supported.

### Unsupported object types

-   Editions
-   Operators
-   Schedulers
-   LOB indexes and indexes on materialized views
-   XML schemas
-   Profiles
-   Role and object grants
-   Tablespaces
-   Directories
-   Users
-   RLS policy
-   Queues

## Wrapped objects  

Migration Portal can't assess wrapped objects. If you include them in the extracted DDL, they aren't loaded into Migration Portal and aren't included in the count of objects that are assessed. If you want to assess wrapped objects and migrate them to EDB Postgres Advanced Server, include unwrapped versions of the objects in the DDL file that you upload to Migration Portal. The recommended way of doing this is to replace the wrapped versions in the Oracle database with clear-text versions before performing the schema extraction. After performing the schema extraction, you can replace the objects with the wrapped versions.

## About file encoding

Migration Portal recommends the `.SQL` output file be in the UTF-8 encoding format. If you upload a `.SQL` file with non-UTF-8 encoding, all the characters that aren't compatible with UTF-8 are converted to the replacement character ‘�’ in the output DDL.

!!! Tip
    You can manually convert the extracted file to the UTF-8 format by using the iconv utility on Linux or the LibIconv utility on Windows. For example, if your database character set is in Latin-1 (ISO-8859-1), you can convert the extracted file to the UTF-8 format, as follows:
 
    `iconv -f iso-8859-1 -t UTF-8 sample.sql > sample_utf8.sql`
