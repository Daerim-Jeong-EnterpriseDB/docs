---
title: Trusted Postgres Architect 23.28 release notes 
navTitle: "Version 23.28"
---

Released: 23 Jan 2024

New features, enhancements, bug fixes, and other changes in Trusted Postgres Architect 23.28 include the following:

| Type | Description |
| ---- |------------ |
| Enhancement | Added a new option `postgres_log_file`. This option sets the Postgres log file, whether logging through stderr or syslog. The default is '/var/log/postgres/postgres.log', the previously hard-coded value. |
| Enhancement | Added a new hook `barman-pre-config`. This hook is invoked after Barman is installed and its user is set up but before it is configured. It can be used for installing certificate files or other tasks which need the barman user to exist but which must be done before Barman is started. |
| Enhancement | The key `elastic_ip` on an AWS instance in `config.yml` can be set to an elastic IP address that has already been allocated in order to assign it to this instance. |
| Change | In Patroni clusters, TPA now sets up replicas before handing over control of the cluster to Patroni, rather than setting up the primary only and letting Patroni set up the replicas. |
| Change | For new clusters, TPA will create the user specified by setting `harp_manager_user` (by default `harpmanager`), belonging to the `bdr_superuser` role, and set HARP Manager to operate as this user instead of `postgres` superuser. This does not affect the existing clusters where TPA will keep using `postgres` as the HARP Manager user, unless the user overrides this behavior by explicitly setting `harp_manager_user` to a different value in `config.yml`. |
| Bug Fix | Fixed an issue whereby TPA would erroneously attempt to install repmgr on an EFM cluster. |
| Bug Fix | Fixed an issue whereby the TPA would return a non-zero exit code when the warning about 2q repositories was displayed despite deploy having succeeded.|
| Bug Fix | TPA will now interpret wildcards correctly on Debian-family systems when downloading packages for offline use. |
| Bug Fix | Fixed an issue whereby TPA would attempt to use incorrect package names for repmgr when installing from PGDG repositories. |
| Bug Fix | Fixed barman connection failure when using selinux and a custom barman home directory. |
| Bug Fix | TPA will now use the correct cluster name in `show-password` and `store-password` commands when it is different from the directory name |
| Bug Fix | TPA will now error out cleanly if unavailable 2ndQuadrant repository keys are required. |
| Bug Fix | TPA will now sanitize hostnames correctly when the --cluster-prefixed-hostnames option is used. |
| Bug Fix | TPA will now ensure packages are correctly copied to the remote host when upgrading a cluster using a local repo. |


