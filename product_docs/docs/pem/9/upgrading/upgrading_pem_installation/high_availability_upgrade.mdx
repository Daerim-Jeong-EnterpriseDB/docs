---
title: "Upgrading a PEM installation on high-availability mode using HTTPD"
---

If you are using [Failover Manager for high availability](../../considerations/setup_ha_using_efm) on your PEM server, you can perform a major or minor upgrade of the PEM installation by updating the PEM packages.

The example uses these IP addresses:

-  Primary server: 172.17.0.2
-  Secondary server: 172.17.0.3
-  Tertiary server: 172.17.0.4

And applies to RHEL-based operating systems where HTTPD is used for the web server services.

## Upgrading the packages

1.  On the primary server (172.17.0.2), update the PEM packages: 

    ```
    dnf update edb-pem
    ```

    This also pulls the latest version of the script required for the upgrade.

1.  Execute the upgrade script. It handles upgrade PEM to the latest available version, restarts the backend database, the web server and PEM agent: 

    ```
    /usr/edb/pem/bin/configure-pem-server.sh
    ``` 

1.  On the secondary server (172.17.0.3), update the PEM packages:

    ```
    dnf update edb-pem
    ```

1.  Copy the configuration files, certificate and key from the primary server to the secondary server: 

    ```
    /etc/httpd/conf.d/edb-pem.conf
    /etc/httpd/conf.d/edb-ssl-pem.conf
    /usr/edb/pem/share/.install-config
    /usr/edb/pem/resources/server-pem.crt
    /usr/edb/pem/resources/server-pem.key
    /usr/edb/pem/web/pem.wsgi
    /usr/edb/pem/web/config_setup.py
    ```

The upgrade is complete. 
