---
title: Managing an extreme high-availability cluster
--- 

Extreme high-availability clusters run on EDB Postgres Distributed clusters for more advanced cluster management. These clusters are deployed across multiple cloud regions for increased availability. 

## Create a data group 

When you create an extreme high-availability cluster, you need to set up the data group. Extreme high-availability clusters can contain one or two data groups. 

1.  Sign in to the [BigAnimal](https://portal.biganimal.com) portal.

1.  Select **Create New Cluster** in the top right of the **Overview** page or **Clusters** page.

1. In the **Cluster info** tab, select **Extreme high availability**. 

1. Select **Next: Cluster Settings**. 

1. In the **Cluster Settings** tab, enter your cluster name and password. 

1. Select **Next: Data Groups**. 

1. Go to the **Nodes Settings** tab. 

1. In the **Nodes** section, choose between **Two Data Nodes** and **Three Data Nodes**. The default for one data group is three data nodes. For more information on node architecture, see [Extreme High Availability](/biganimal/latest/overview/02_high_availability/#extreme-high-availability-preview).

1. In the **Database Type** section:

   1.  Select the type of Postgres you want to use in the **Postgres Type** field:

        -   **Oracle Compatible** is powered by [EDB Postgres Advanced Server](/epas/latest/). View [a quick demonstration of Oracle compatibility on BigAnimal](../../using_cluster/06_demonstration_oracle_compatibility). EDB Postgres Advanced Server is compatible with all three cluster types.

        -   **PostgreSQL Compatible** uses advanced logical replication of data and schema. It is only available if you select extreme high availability as your cluster type.
    
    1.  In the **Postgres Version** list, select the version of Postgres that you want to use. See [Database version policy](../../overview/05_database_version_policy) for more information.

1.  In the **Region** section, select the region where you want to deploy your cluster.

    You can select a region for deploying your cluster even if it is not yet *Active*. Your cluster creation request is added to a queue, and the cluster is created after you activate the region. See [Activating regions](/biganimal/latest/getting_started/activating_regions) for more information.

    !!! Tip
        For the best performance, EDB strongly recommends that this region be the same as your other resources that communicate with your cluster. For a list of available regions, see [Supported regions](../../overview/03a_region_support). If you are interested in deploying a cluster to a region that isn't currently available, contact [Support](/biganimal/latest/overview/support/). 

1.  In the **Instance Type** section: 

    1. Select the category that works best for your applications and workload: 
       - Memory optimized for large data sets
       
       - Compute optimized for compute bound applications
       - General purpose if you don't require memory or compute optimization. 
    1. Select the instance series and size. See [Sizes for virtual machines in Azure](https://docs.microsoft.com/en-us/azure/virtual-machines/sizes) or [Amazon EC2 Instance Types](https://aws.amazon.com/ec2/instance-types/) for information to help you choose the appropriate instance type. 
       !!!tip
       To maximize your disk size for AWS, select Rb5 as your instance, and then io2 Block Express as your storage to get a maximum disk size of 64 TB and 256,000 IOPS.

1.  In the **Storage** section, select your volume type from the **Volume Type** list. 
       - For Azure, in **Volume Type** select either **Premium SSD** or **Ultra Disk**. Compared to Premium SSD volumes, ultra disks offer lower latency, high-performance options, and direct control over your disk's input/output operations per second (IOPS). For BigAnimal, we recommend using ultra disks for workloads that require the most demanding performance. See [Using Azure ultra disks](https://docs.microsoft.com/en-us/azure/virtual-machines/disks-enable-ultra-ssd?tabs=azure-portal) for more information. 
          - For Premium SSD, in **Volume Properties**, select the type and amount of storage needed for your cluster. See [Azure Premium SSD storage types](https://docs.microsoft.com/en-us/azure/virtual-machines/disks-types#premium-ssds) for more information. 

          - For ultra disk, in **Volume Properties**, select the disk size and IOPS for your cluster. BigAnimal calculates the throughput based on your IOPS settings. 

           !!!important
           While setting the required IOPS for the disk that you selected, consider the VM limits that are tied to the VM size that you have selected. See [Ultra disk IOPS](https://docs.microsoft.com/en-us/azure/virtual-machines/disks-types#ultra-disk-iops) for more information.

       - For AWS, in **Volume Type** select either **General Purpose SSD (GP3)**, **io2**, or **io2 Block Express**.
      
       !!!Note
       io2 Block Express is available for selected instance types (such as R5b). However, you can't switch between io2 and io2 Block Express after creating your cluster.
       !!!  
     
        In **Volume Properties**, select the disk size for your cluster, and configure the IOPS.

1.  In the **Networking** section, specify whether to use private or public networking. Networking is set to **Public** by default. Public means that any client can connect to your clusterâ€™s public IP address over the internet. Optionally, you can limit traffic to your public cluster by specifying an IP allowlist, which allows access only to certain blocks of IP addresses. To limit access, add one or more classless inter-domain routing (CIDR) blocks in the **IP Allowlists** section. CIDR is a method for allocating IP addresses and IP routing to a whole network or subnet. If you have any CIDR block entries, access is limited to those IP addresses. If none are specified, all network traffic is allowed. 

    Private networking allows only IP addresses within your private network to connect to your cluster. See [Cluster networking architecture](/biganimal/latest/getting_started/creating_a_cluster/01_cluster_networking) for more information.

1. In the **Backups** section, change the default database backup retention period of 30 days using the **Retention Time** controls in the **Backups** section. You can configure the retention period as follows:

   - 1 - 180 days
   - 1 - 25 weeks
   - 1 - 6 months

   BigAnimal automatically deletes backups older than the retention period.

1. In the **Maintenance** section, you can enable the **Custom Maintenance Window** option and use the controls to set a weekly 60 minute maintenance window in which maintenance upgrades occur for the cluster. If you don't set a window, the updates are applied at EDB's discretion (with prior notification).  

   !!! Note
       The 60-minute maintenance window specifies the start time. The end time is determined by how long the update takes.

   For more information, see [Periodic maintenance](/biganimal/release/overview/updates).

1. In the **Authentication** section, enable **Identity and Access Management (IAM) Authentication** to turn on the ability to log in to Postgres using your AWS IAM credentials. For this feature to take effect, after you create the cluster, you must add each user to a role that uses AWS IAM authentication in Postgres. For details, see [IAM authentication for Postgres](/biganimal/latest/using_cluster/01_postgres_access/#iam-authentication-for-postgres).   

1. Go to the **DB Configuration** tab. 

1. In the **Parameters** section, you can update the value of the database configuration parameters, as needed. 

   To update the parameter values, see [Modifying Your Database Configuration Parameters](/biganimal/latest/using_cluster/03_modifying_your_cluster/05_db_configuration_parameters).

1. Select **Create: Data Group** and the data group preview appears. 

1. To finish creating your cluster, select **Create Cluster**. If you want to create a second data group, select **Add a Data Group**.

## Create a second data group

After creating your first cluster, you can create a second data group for your extreme high-availability cluster by selecting **Add a Data Group** on the cluster preview page before you create the cluster. The settings for your first data group pre-populate the second data group's settings. However, if you wish to change any of these settings you can according to the instructions in [Create a data group](#create-a-data-group).

!!! Note
    Changes to one data group's GUCs affect the entire cluster. A popup window asks that you confirm any changes you make. 

## Edit a data group 

You can make changes to your data group after creating it. 

1. Sign in to the [BigAnimal](https://portal.biganimal.com) portal.

1. On the **Clusters** page, select the data group you want to edit. Data groups display beneath the cluster they are in. 

1. Select **Edit** next to the data group. 

1. Edit the cluster settings in the **Data Groups** tab. Refer to [Create a data group](#create-a-data-group) for more information on data group settings.

1. When you are finished in the **Node Settings** tab, select **Save**. 

1. When you are finished in the **DB Configuration** tab, select **Save**. 

1. In the popup window, confirm your changes.

## Restore an extreme high-availability cluster

You can restore one data group into a new PGD cluster but can't restore a whole two-data-group cluster. To restore a whole two-data-group cluster, restore one data group into a new cluster and add the second data group manually.  

1. Sign in to the [BigAnimal](https://portal.biganimal.com) portal.

1. On the **Clusters** page, select the cluster with the data group that you are restoring.

1. In the **Quick actions** dropdown menu, select **Restore**.

1. In the **Cluster Settings** tab, enter a cluster name and password for your restored cluster. 

1. Select **Next: Data Group**. 

1. Go to the **Node Settings** tab.

1. In the **Source** section: 

   1. Select the data group you want to restore. You can restore only one data group into a new cluster. 

   1. Select **Fully Restore** or **Point in Time Restore**. A point in time restore restores the data group as it was at the specified date and time. 

1. In the **Nodes** section, choose between **Two Data Nodes** and **Three Data Nodes**. For more information on node architecture, see [Extreme High Availability](/biganimal/latest/overview/02_high_availability/#extreme-high-availability-preview).

1. Follow Steps 9-18 in [Create a data group](#create-a-data-group). 

1. Select **Restore** to finish.
