---
title: "Troubleshooting"
---

-------------- current
## pg_waldump
Use these TDE options with `initdb -y`:

### Options

| Option | Description | 
| ------- | ---------- |
| --data-encryption | Consider the WAL files to be encrypted and decrypt them before processing them. This must be specified if the WAL files have been encrypted by transparent data encryption. pg_waldump cannot automatically detect whether WAL files are encrypted. |
| --key-file-name=*file* | Load the data encryption key from the given location.
| --key-unwrap-command=*command* | Specifies a command to unwrap (decrypt) the data encryption key. The command should include a placeholder `%p` that specifies the file to read the wrapped key from. The command needs to write the unwrapped key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for further information. |


### Environment

The `PGDATAKEYUNWRAPCMD` specifies the default for the option --key-unwrap-command.

### See also
[PostgreSQL pg_waldump documentation](https://www.postgresql.org/docs/15/pgwaldump.html)


## pg_resetwal

TDE-specific options to `pg_resetwal`:

### Options

| Option | Description | 
| ------- | ---------- |
| --key-unwrap-command=*command* | Specifies a command to unwrap (decrypt) the data encryption key. The command should include a placeholder `%p` that specifies the file to read the wrapped key from. The command needs to write the unwrapped key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for further information. |

### Environment

The environment variable `PGDATAKEYUNWRAPCMD` specifies the default for the option `--key-unwrap-command`. 


### See also
[PostgreSQL pg_resetwal documentation](https://www.postgresql.org/docs/15/app-pgresetwal.html):



----------------
### Dumping a TDE-encrypted WAL file

(current: wal/ - update/fix)

### Resetting a corrupt, TDE-encrypted WAL file
(current:  wal/ - update)

----------
TDE-specific file locations:

## File locations

| Option | Description | 
| ------- | ---------- |
| data_encryption_key_unwrap_command (*string*) | <p> Specifies a command to unwrap (decrypt) the data encryption key. The command should contain a placeholder `%p`, which will be replaced by the name of the file containing the key to unwrap. The command must print the unwrapped (decrypted) key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for more information. This parameter can only be set at server start. </p> This parameter is normally initialized by `initdb` and doesn't need to be changed unless the key wrap method is changed.


## See also
[PostgreSQL File Locations documentation](https://www.postgresql.org/docs/15/runtime-config-file-locations.html)