---
title: "Backup and restore"
---


### Verify a backup of a TDE system

(current: backups/, runtime_config_file_locations/ data_encryption_key_unwrap_command)

### Resynchronizing timelines in a TDE system

(current: backups/ - add intros, runtime_config_file_locations/ data_encryption_key_unwrap_command)

---------------------
## pg_verifybackup

TDE-specific options to `pg_verifybackup`:

### Options

| Option | Description | 
| ------- | ---------- |
| --key-unwrap-command=*command* | Specifies a command to unwrap (decrypt) the data encryption key. The command should include a placeholder `%p` that specifies the file to read the wrapped key from. The command needs to write the unwrapped key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for further information. |

### See also
[PostgreSQL pg_verifybackup documentation](https://www.postgresql.org/docs/15/app-pgverifybackup.html)

## pg_rewind

TDE-specific options to [pg_rewind](https://www.postgresql.org/docs/15/app-pgrewind.html):

### Options

| Option | Description | 
| ------- | ---------- |
| --key-unwrap-command=*command* | Specifies a command to unwrap (decrypt) the data encryption key. The command should include a placeholder `%p` that specifies the file to read the wrapped key from. The command needs to write the unwrapped key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for further information. |

### Environment

The environment variable `PGDATAKEYUNWRAPCMD` specifies the default for the option `--key-unwrap-command`.

### See Also
[PostgreSQL pg_rewind documentation](https://www.postgresql.org/docs/15/app-pgrewind.html)
