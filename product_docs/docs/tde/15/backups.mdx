---
title: "Working with encrypted backup files"
---


### Verify a backup of a TDE system

To verify an encrypted backup file, the [pg_verifybackup](https://www.postgresql.org/docs/15/app-pgverifybackup.html) command needs to be aware of the unwrap key. You can either pass the key for the unwrap command using the following option to the pg_verifybackup command or depend on the fallback environment variable.


| Option | Description | 
| ------- | ---------- |
| --key-unwrap-command=*command* | Specifies a command to unwrap (decrypt) the data encryption key. The command should include a placeholder `%p` that specifies the file to read the wrapped key from. The command needs to write the unwrapped key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. <br /> <br /> An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for further information. |


### Resynchronizing timelines in a TDE system

To resynchronize an encrypted cluster with its backup, the [pg_rewind](https://www.postgresql.org/docs/15/app-pgrewind.html) command needs to be aware of the unwrap key. You can either pass the key for the unwrap command using the following option to the pg_rewind command or depend on the fallback environment variable.


| Option | Description | 
| ------- | ---------- |
| --key-unwrap-command=*command* | Specifies a command to unwrap (decrypt) the data encryption key. The command should include a placeholder `%p` that specifies the file to read the wrapped key from. The command needs to write the unwrapped key to its standard output. If this is not specified, the environment variable `PGDATAKEYUNWRAPCMD` is used. The environment variable `PGDATAKEYUNWRAPCMD` specifies the default for the option `--key-unwrap-command`. <br /> <br /> An empty string means to not apply any key unwrapping command. Specifying this option or the environment variable fallback is required if data encryption is used. See [Key management](/tde/latest/#key-management) for further information. |

