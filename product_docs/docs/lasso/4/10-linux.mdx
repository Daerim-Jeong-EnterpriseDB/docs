---
title: Linux systems
---

### Requirements

1. Glibc 2.5 or newer.


### PostgreSQL and BDR3 report

As `postgres` user, copy the Lasso binary into a folder.

!!! Important
The command must be run with the same user which runs
the PostgreSQL server process and must have enough permission to write
in the current working directory.
!!!

A standard Lasso run consists of:

    $ ./lasso

Lasso will write the output file in the current working directory.

!!! Warning
Lasso needs to execute files from the
temporary directory. If your system temporary directory is mounted
with `noexec` flag, you will obtain the following error:

    ./lasso: error while loading shared libraries:
    libz.so.1: failed to map segment from shared object:
    Operation not permitted

In that case, you can specify a different temporary file location
using the `TMPDIR` environment variable:

    TMPDIR=/some/alternate/tmp/location ./lasso
!!!

!!! Important
When run on a local instance, Lasso
requires a user that belongs to the `pg_monitor` role (available
from PostgreSQL 10 onwards). Before 10, it requires to run as
a superuser. For further information, please read the
["Default Roles"](https://www.postgresql.org/docs/current/default-roles.html)
page in the "Database roles" section of PostgreSQL's documentation.
!!!

Lasso transparently gathers information related to
all supported versions of **BDR** and **Pglogical**.

### Barman report

Lasso can be run on systems where Barman is installed. In that
case, it will gather barman related information, as well as system information,
that will help us during analysis.

As `barman` user, copy the Lasso binary into a folder.

!!! Important
The command must be run with the same user which runs
Barman process and must have enough permission to write in the current
working directory. If you have installed Barman using RPM/DEB packages,
Barman is configured to be run as `barman` user.
!!!

**Barman report is enabled by default if Lasso is ran as `barman` user**,
and looks for configuration files in the expected locations, typically `/etc/barman.conf`
(type `man 5 barman` for details).

In general, if you have installed Barman using EDB certified RPM and DEB
packages, all you need to do is execute Lasso as `barman` user.

#### Managing custom installations of Barman

In case you have custom installations of Barman, you can enable the barman report
by passing the `--barman` option to Lasso:

    $ ./lasso --barman

You can also point to a specific global configuration file, by using the `--barman-configuration`
option, as follows:

    $ ./lasso --barman-configuration /opt/barman/barman.conf


### repmgr report

Lasso can be run on systems where repmgr is installed. In that
case, it will gather repmgr related information.

In general, if you have installed repmgr using EDB certified RPM and DEB
packages, all you need to do is execute Lasso.

#### How Lasso finds the repmgr configuration file

Lasso will use the below approach while trying to identify the repmgr
configuration file, and will use the first one which is found:

1. Use the one provided through `--repmgr-configuration` option, if given
2. Check the paths provided by packages. For example in CentOS/RHEL packages the
configuration file is usually put under `/etc/repmgr/<PG_VERSION>/repmgr.conf`.
Lasso will inspect those folders, if they exist, in descending order, and use the
first repmgr configuration file that is found.
3. Check if a `repmgr.conf` file exists in the current directory
4. Check if `/etc/repmgr.conf` file exists
5. Check the path given by `pg_config --sysconfdir` for `repmgr.conf` file
6. Check the output of `systemctl cat <service_name>` where `<service_name>` is
replaced with any service which name contains `repmgr`, and try to get the `repmgr.conf`
file from the service unit file. It will check the units in descending order, just
as it does in `2.`, and use the first match

#### Managing custom installations of repmgr

You can point to a specific repmgr configuration file, by using the `--repmgr-configuration`
option, as follows:

    $ ./lasso --repmgr-configuration /opt/repmgr/repmgr.conf

This is actually the preferred approach, as it guarantees Lasso will use
the correct repmgr configuration file instead of trying to find it automatically.


### PEM report

Lasso can be run on systems where PEM is installed. In that
case, it will also gather PEM related information, like some configuration
files and information about services.

Lasso will inspect the well known paths for configuration files,
as well as well known service names. If you have custom PEM installations,
Lasso will not gather the related information.


### EFM report

Lasso can be run on systems where EFM is installed. In that
case, it will gather EFM related information.

In general, if you have installed EFM using EDB certified RPM and DEB
packages, all you need to do is execute Lasso.

#### How Lasso finds the EFM configuration file

Lasso will use the below approach while trying to identify the EFM
configuration file, and will use the first one which is found:

1. Use the one provided through `--efm-configuration` option, if given
2. Check the paths provided by packages. The configuration file is usually put
under `/etc/edb/efm-<EFM_VERSION>/efm.properties`. Lasso will inspect
those folders, if they exist, in descending order, and use the first EFM
configuration file that is found.
3. Check the output of `systemctl cat <service_name>` where `<service_name>` is
replaced with any service which name starts with `edb-efm-`, and try to get the
`efm.properties` file from the service unit file. It will check the units in
descending order, just as it does in `2.`, and use the first match.

#### How Lasso finds the EFM binary

Lasso will inspect the paths provided by packages. The binary file is
usually put under `/usr/edb/efm-<EFM_VERSION>/bin/efm`. Lasso will inspect
these folders, if they exist, in descending order, and use the first EFM binary
file that is found.

#### Managing custom installations of EFM

You can point to a specific EFM configuration file, by using the `--efm-configuration`
option, as follows:

    $ ./lasso --efm-configuration /opt/EFM/efm.properties

This is actually the preferred approach, as it guarantees Lasso will use
the correct EFM configuration file instead of trying to find it automatically.


### xDB report

Lasso can be run on systems where xDB is installed. In that
case, it will gather xDB related information.

In general, if you have installed xDB using EDB certified RPM packages or the
bitrock installer, all you need to do is execute Lasso.

#### How Lasso finds the xDB configuration file

Lasso will use the below approach while trying to identify the xDB
configuration files, and will use the first one which is found:

1. Use the ones provided through `--xdb-pubserver-configuration` and
`--xdb-subserver-configuration` options, if given
2. Check the paths provided by xDB 7 RPM package and bitrock installer. The
configuration files are usually put under `/etc/edb/xdb/etc`. Lasso will
inspect this folder, if it exists, and use the `xdb_pubserver.conf` and
`xdb_subserver.conf` found under that folder.
3. Check the paths provided by xDB 6 RPM package and bitrock installer, which are
usually `/usr/ppas-xdb-<XDB_VERSION>/etc` and `/opt/PostgreSQL/EnterpriseDB-xDBReplicationServer/etc`,
respectively. Lasso will inspect these folders, and if they exist, use the
`xdb_pubserver.conf` and `xdb_subserver.conf` found under the folder. In the
case of RPM packages, as there can be a lot of folders, they will be inspected
from newest xDB to oldest xDB version.

#### How Lasso finds the xDB binary

Lasso will use the below approach while trying to identify the xDB
binary files, and will use the first one which is found:

1. Check the paths provided by xDB 7 RPM package and bitrock installer. The
binary files are usually put under `/etc/edb/xdb/bin`. Lasso will
inspect this folder, if it exists, and use the `edb-repcli.jar` found under that
folder.
2. Check the paths provided by xDB 6 RPM package and bitrock installer, which are
usually `/usr/ppas-xdb-<XDB_VERSION>/bin` and `/opt/PostgreSQL/EnterpriseDB-xDBReplicationServer/bin`,
respectively. Lasso will inspect these folders, and if they exist, use the
`edb-repcli.jar` found under the folder. In the case of RPM packages, as there
can be a lot of folders, they will be inspected from newest xDB to oldest xDB
version.

#### Managing custom installations of EFM

You can point to a specific xDB publication and/or subscription server configuration
file, by using the `--xdb-pubserver-configuration` and `--xdb-subserver-configuration`
options, as follows:

    $ ./lasso --xdb-pubserver-configuration /opt/xDB/pubserver.conf --xdb-subserver-configuration /opt/xDB/subserver.conf

This is actually the preferred approach, as it guarantees Lasso will use
the correct xDB configuration files instead of trying to find it automatically.

### PgBouncer report

Lasso can be run on systems where PgBouncer is installed. In that
case, it will gather PgBouncer related information.

In general, if you have installed PgBouncer using EDB certified RPM and DEB
packages, and PgBouncer instances are up and running, all you need to do is
execute Lasso.

#### How Lasso finds the PgBouncer configuration file

Lasso will use the list of running processes to identify the PgBouncer processes,
and will use the configuration file retrieved from there.

Additionally, the user can specify 1 or more PgBouncer configuration files through
the argument `--pgbouncer-configuration` of Lasso. It is mainly useful in scenarios
where PgBouncer instance is not running, or if by some reason Lasso is not able
to automatically detect the configuration file from the process list.

Lasso will collect information from all identified PgBouncer instances.


### HARP report

Lasso can be run on systems where HARP is installed. In that
case, it will gather HARP related information.

In general, if you have installed HARP using EDB certified RPM and DEB
packages, all you need to do is execute Lasso.

#### How Lasso finds the HARP configuration file

Lasso will use the below approach while trying to identify the HARP
configuration file, and will use the first one which is found:

1. Use the one provided through `--harp-configuration` option, if given
2. Check if `/etc/harp/config.yml` file exists

#### Managing custom installations of HARP

You can point to a specific HARP configuration file, by using the `--harp-configuration`
option, as follows:

    $ ./lasso --harp-configuration /opt/harp/config.yml

This is actually the preferred approach, as it guarantees Lasso will use
the correct HARP configuration file instead of trying to find it automatically.

#### Running Lasso on a HARP proxy node

The HARP proxy nodes do not have a Postgres/EPAS service running on them, as they are
only intended as a proxy for connections coming in from the applications.

When using Lasso to gather information from a HARP proxy node you will have to use the
`--system-only` option so it doesn't try to connect to the database server.


### etcd report

Lasso can be run on systems where `etcd` is installed. In that
case, it will gather `etcd` related information.

#### How Lasso finds the etcd configuration file

Lasso will use the below approach while trying to identify the etcd
configuration file, and will use the first one which is found:

1. Use the one provided through `--etcd-configuration` option, if given
2. Check if `/etc/etcd/etcd.conf` file exists


### System only report

Lasso can also be run on systems where PostgreSQL or
Barman are not installed, in order to gather all relevant information
regarding the underlying operating system.

You can run a system-only report with the following command:

    $ ./lasso --system-only
